<%# Image carousel for external listings - reusable across themes %>
<% if @listing.images.any? %>
  <div class="relative">
    <%# Main Image %>
    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden bg-gray-100">
      <img id="main-image"
           src="<%= @listing.main_image %>"
           alt="<%= @listing.title %>"
           class="w-full h-96 object-cover">
    </div>

    <%# Thumbnail Strip %>
    <% if @listing.images.size > 1 %>
      <div class="mt-4 flex gap-2 overflow-x-auto pb-2">
        <% @listing.images.each_with_index do |img, idx| %>
          <button type="button"
                  onclick="document.getElementById('main-image').src = '<%= img[:url] %>'"
                  class="flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 hover:border-blue-500 focus:outline-none focus:border-blue-500 <%= idx == 0 ? 'border-blue-500' : 'border-transparent' %>">
            <img src="<%= img[:thumbnail] || img[:url] %>"
                 alt="<%= @listing.title %> - Image <%= idx + 1 %>"
                 class="w-full h-full object-cover">
          </button>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden bg-gray-200 flex items-center justify-center h-96">
    <svg class="h-24 w-24 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
    </svg>
  </div>
<% end %>
